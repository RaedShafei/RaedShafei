
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ibn Omar Hash Demo</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #1a1a1a;
            color: #eee;
            padding: 2rem;
            max-width: 700px;
            margin: auto;
        }
        h1 {
            color: #4ea8de;
        }
        textarea {
            width: 100%;
            height: 120px;
            margin-top: 10px;
            padding: 10px;
            background: #2b2b2b;
            color: #f5f5f5;
            border: 1px solid #444;
            border-radius: 5px;
            resize: vertical;
        }
        button {
            padding: 10px 20px;
            margin-top: 10px;
            background-color: #2b6cb0;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #63b3ed;
        }
        .output {
            margin-top: 20px;
            padding: 1rem;
            background: #2b2b2b;
            border-radius: 5px;
        }
        .hidden {
            display: none;
        }
        .loading {
            font-style: italic;
            color: #aaa;
        }
        .copy-btn {
            margin-top: 10px;
            background-color: #4ea8de;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            color: black;
        }
    </style>
</head>
<body>
    <h1>Ibn Omar Hash Algorithm Demo</h1>
    <p>Enter a message to generate its hash using the Ibn Omar algorithm:</p>
    <textarea id="textInput" placeholder="Type your message here..."></textarea><br>
    <button onclick="generateHash()">Hash It</button>
    <p id="loading" class="loading hidden">Hashing in progress...</p>

    <div class="output hidden" id="result">
        <strong>Hash:</strong>
        <pre id="hashOutput"></pre>
        <button class="copy-btn" onclick="copyHash()">Copy Hash</button>
    </div>

    <script>
        function generateHash() {
            const input = document.getElementById('textInput').value.trim();
            const resultBox = document.getElementById('result');
            const hashOutput = document.getElementById('hashOutput');
            const loadingText = document.getElementById('loading');

            if (!input) {
                alert("Please enter a message.");
                return;
            }

            resultBox.classList.add('hidden');
            loadingText.classList.remove('hidden');

            fetch('https://ibn-omar-hash-algorithm-app.onrender.com/hash', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text: input })
            })
            .then(res => res.json())
            .then(data => {
                loadingText.classList.add('hidden');
                if (data.hash && data.hash !== "HASH_ERROR") {
                    hashOutput.textContent = data.hash;
                    resultBox.classList.remove('hidden');
                } else {
                    alert("An error occurred while hashing your input.");
                }
            })
            .catch(err => {
                loadingText.classList.add('hidden');
                alert("Request failed: " + err);
            });
        }

        function copyHash() {
            const hashText = document.getElementById('hashOutput').textContent;
            navigator.clipboard.writeText(hashText).then(() => {
                alert("Hash copied to clipboard!");
            }, () => {
                alert("Failed to copy hash.");
            });
        }
    </script>
</body>
</html>
